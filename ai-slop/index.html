<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pbmine - Personal Page</title>
    <style>
        @font-face {
            font-family: "Chicago";
            src: url("data:font/woff2;base64,d09GMgABAAAAAAZQAA0AAAAAC2QAAAYCAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGhYbgRgcNAZgAEQRCAqHbIYiCwoAATYCJAMUBCAFhG0HUBsHCMgekiRIhAJBkCRZrP/fCZJ4+For3+/pPQIOgBWgI1CsE4VSRDqqujB5XMCvcgmyfmE3xfkCzMCZ+L/ZJxmdBbqQp5FGWFR3cGPK7Q4MNAr8Aw==") format("woff2");
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: "Chicago", "Geneva", "Helvetica", sans-serif;
            background: #c0c0c0 url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAYAAABytg0kAAAAFElEQVQIW2P8//+/MQMDA8MJBgYGAEcMAgFdTWTeAAAAAElFTkSuQmCC') repeat;
            image-rendering: pixelated;
            padding: 20px;
            min-height: 100vh;
        }

        .desktop {
            position: relative;
            min-height: calc(100vh - 40px);
        }

        /* Classic Mac Window */
        .window {
            background: #ffffff;
            border: 2px solid #000000;
            box-shadow: 2px 2px 0 rgba(0,0,0,0.5);
            margin-bottom: 20px;
            max-width: 600px;
            position: absolute;
            display: none;
        }

        .window.visible {
            display: block;
        }

        .title-bar {
            background: #000000;
            color: #ffffff;
            padding: 2px 4px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 19px;
            cursor: move;
            user-select: none;
        }

        .title-bar-text {
            font-size: 12px;
            letter-spacing: 0.5px;
            margin-left: 4px;
        }

        .title-bar-controls {
            display: flex;
            gap: 2px;
            align-items: center;
        }

        .window-button {
            width: 12px;
            height: 12px;
            border: 1px solid #000000;
            background: #ffffff;
            cursor: pointer;
            position: relative;
        }

        .window-button.close::before {
            content: '';
            position: absolute;
            width: 8px;
            height: 8px;
            background: #000000;
            left: 2px;
            top: 2px;
        }

        .window-content {
            padding: 12px;
            font-size: 12px;
            line-height: 1.5;
        }

        .window-content p {
            margin-bottom: 10px;
        }

        /* Classic Mac Button */
        .mac-button {
            background: #ffffff;
            border: 2px solid #000000;
            padding: 4px 16px;
            font-family: "Chicago", "Geneva", sans-serif;
            font-size: 12px;
            cursor: pointer;
            box-shadow: 2px 2px 0 rgba(0,0,0,0.3);
            margin-top: 8px;
            margin-right: 8px;
        }

        .mac-button:active {
            background: #000000;
            color: #ffffff;
            box-shadow: inset 2px 2px 0 rgba(0,0,0,0.5);
        }

        .mac-button:hover {
            background: #f0f0f0;
        }

        /* Menu Bar */
        .menu-bar {
            background: #ffffff;
            border: 2px solid #000000;
            border-bottom: 1px solid #000000;
            padding: 2px 8px;
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            font-size: 12px;
            box-shadow: 2px 2px 0 rgba(0,0,0,0.5);
            align-items: center;
        }

        .menu-item {
            cursor: pointer;
            padding: 2px 8px;
            user-select: none;
            position: relative;
        }

        .menu-item:hover {
            background: #000000;
            color: #ffffff;
        }

        .pb-logo {
            font-weight: bold;
            font-size: 14px;
            padding: 2px 12px;
            border-right: 1px solid #000000;
        }

        /* Dropdown menu */
        .dropdown-menu {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            background: #ffffff;
            border: 2px solid #000000;
            box-shadow: 2px 2px 0 rgba(0,0,0,0.5);
            min-width: 150px;
            z-index: 1000;
        }

        .dropdown-menu.active {
            display: block;
        }

        .dropdown-item {
            padding: 4px 12px;
            cursor: pointer;
            border-bottom: 1px solid #000000;
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        .dropdown-item:hover {
            background: #000000;
            color: #ffffff;
        }

        /* Desktop Icons */
        .desktop-icon {
            position: absolute;
            text-align: center;
            cursor: pointer;
            padding: 8px;
            width: 80px;
        }

        .desktop-icon.selected .icon-image {
            background: #000000;
            color: #ffffff;
        }

        .icon-image {
            width: 48px;
            height: 48px;
            background: #ffffff;
            border: 2px solid #000000;
            margin: 0 auto 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
        }

        .icon-label {
            font-size: 10px;
            background: #ffffff;
            padding: 2px 4px;
            border: 1px solid transparent;
            display: inline-block;
        }

        .desktop-icon.selected .icon-label {
            background: #000000;
            color: #ffffff;
        }

        /* System 7 inset panel */
        .inset-panel {
            border: 2px solid #000000;
            border-right-color: #ffffff;
            border-bottom-color: #ffffff;
            background: #ffffff;
            padding: 8px;
            margin: 8px 0;
        }

        /* Status text */
        .status-badge {
            display: inline-block;
            padding: 2px 6px;
            border: 1px solid #000000;
            background: #ffffff;
            font-size: 10px;
            margin-right: 4px;
            margin-top: 4px;
        }

        h2 {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 8px;
            padding-bottom: 4px;
            border-bottom: 1px solid #000000;
        }

        /* Draggable windows */
        .window.dragging {
            opacity: 0.8;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .menu-bar {
                flex-wrap: wrap;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="desktop">
        <!-- Menu Bar -->
        <div class="menu-bar">
            <div class="pb-logo">PB</div>
            <div class="menu-item" id="menu-file">
                File
                <div class="dropdown-menu" id="dropdown-file">
                    <div class="dropdown-item" data-action="open-about">Open About...</div>
                    <div class="dropdown-item" data-action="open-project">Open Project...</div>
                    <div class="dropdown-item" data-action="open-system">About This System</div>
                </div>
            </div>
        </div>

        <!-- Desktop Icons -->
        <div class="desktop-icon" id="icon-about" style="left: 20px; top: 80px;">
            <div class="icon-image">üíæ</div>
            <div class="icon-label">About pbmine</div>
        </div>

        <div class="desktop-icon" id="icon-project" style="left: 20px; top: 180px;">
            <div class="icon-image">üéÆ</div>
            <div class="icon-label">The Overgrown</div>
        </div>

        <div class="desktop-icon" id="icon-system" style="left: 20px; top: 280px;">
            <div class="icon-image">üñ•Ô∏è</div>
            <div class="icon-label">About System</div>
        </div>

        <!-- About Window -->
        <div class="window visible" id="window-about" style="left: 150px; top: 80px;">
            <div class="title-bar" data-window="about">
                <div class="title-bar-text">About pbmine</div>
                <div class="title-bar-controls">
                    <div class="window-button close" data-action="close"></div>
                </div>
            </div>
            <div class="window-content">
                <h2>About Myself</h2>
                <p>Welcome to my Personal page!</p>
                <p>I like coding and stuff, I mostly use Lua for my projects.</p>
                
                <div class="inset-panel">
                    <span class="status-badge">Developer</span>
                    <span class="status-badge">Lua Expert</span>
                    <span class="status-badge">Game Dev</span>
                </div>
            </div>
        </div>

        <!-- Project Window -->
        <div class="window visible" id="window-project" style="left: 200px; top: 280px;">
            <div class="title-bar" data-window="project">
                <div class="title-bar-text">The Overgrown</div>
                <div class="title-bar-controls">
                    <div class="window-button close" data-action="close"></div>
                </div>
            </div>
            <div class="window-content">
                <h2>My Roblox Game</h2>
                <p>I'm currently working on The Overgrown - it is still in pre-alpha.</p>
                <p>But it has been a great pre-alpha so far!</p>
                
                <div class="inset-panel">
                    <span class="status-badge">Pre-Alpha</span>
                    <span class="status-badge">Roblox</span>
                    <span class="status-badge">Active Dev</span>
                </div>
                
                <button class="mac-button" id="view-project">View Project</button>
                <button class="mac-button" id="learn-more">Learn More</button>
            </div>
        </div>

        <!-- About System Window -->
        <div class="window" id="window-system" style="left: 250px; top: 150px;">
            <div class="title-bar" data-window="system">
                <div class="title-bar-text">About This System</div>
                <div class="title-bar-controls">
                    <div class="window-button close" data-action="close"></div>
                </div>
            </div>
            <div class="window-content">
                <h2>PB System 7.0</h2>
                
                <div class="inset-panel">
                    <p><strong>System Software:</strong> PB OS 7.0</p>
                    <p><strong>Built with:</strong> TypeScript & HTML5</p>
                    <p><strong>Memory:</strong> 64KB Free</p>
                    <p><strong>Created by:</strong> pbmine</p>
                </div>
                
                <p style="margin-top: 12px;">¬© 2025 pbmine. All rights reserved.</p>
                <p>A retro-styled personal portfolio inspired by classic Macintosh System 7.</p>
                
                <button class="mac-button" onclick="this.closest('.window').classList.remove('visible')">OK</button>
            </div>
        </div>
    </div>

    <script>
        "use strict";
        
        /**
         * @typedef {Object} Position
         * @property {number} x
         * @property {number} y
         */
        
        /**
         * Window Manager - Handles dragging and window management
         */
        class WindowManager {
            constructor() {
                /** @type {HTMLElement | null} */
                this.draggedWindow = null;
                /** @type {Position} */
                this.offset = { x: 0, y: 0 };
                this.zIndexCounter = 100;
                
                this.init();
            }
            
            /**
             * Initialize window manager
             * @returns {void}
             */
            init() {
                this.attachDragListeners();
                this.attachCloseListeners();
                this.bringToFrontOnClick();
            }
            
            /**
             * Attach drag listeners to title bars
             * @returns {void}
             */
            attachDragListeners() {
                const titleBars = document.querySelectorAll('.title-bar');
                
                titleBars.forEach(titleBar => {
                    titleBar.addEventListener('mousedown', (e) => {
                        this.startDrag(e);
                    });
                });
                
                document.addEventListener('mousemove', (e) => {
                    this.drag(e);
                });
                
                document.addEventListener('mouseup', () => {
                    this.endDrag();
                });
            }
            
            /**
             * Start dragging a window
             * @param {MouseEvent} e
             * @returns {void}
             */
            startDrag(e) {
                const titleBar = e.currentTarget;
                if (!(titleBar instanceof HTMLElement)) return;
                
                const windowEl = titleBar.parentElement;
                if (!windowEl) return;
                
                this.draggedWindow = windowEl;
                this.draggedWindow.classList.add('dragging');
                
                const rect = windowEl.getBoundingClientRect();
                this.offset = {
                    x: e.clientX - rect.left,
                    y: e.clientY - rect.top
                };
                
                this.bringToFront(windowEl);
            }
            
            /**
             * Drag the window
             * @param {MouseEvent} e
             * @returns {void}
             */
            drag(e) {
                if (!this.draggedWindow) return;
                
                e.preventDefault();
                
                const x = e.clientX - this.offset.x;
                const y = e.clientY - this.offset.y;
                
                this.draggedWindow.style.left = Math.max(0, x) + 'px';
                this.draggedWindow.style.top = Math.max(0, y) + 'px';
            }
            
            /**
             * End dragging
             * @returns {void}
             */
            endDrag() {
                if (this.draggedWindow) {
                    this.draggedWindow.classList.remove('dragging');
                    this.draggedWindow = null;
                }
            }
            
            /**
             * Bring window to front
             * @param {HTMLElement} windowEl
             * @returns {void}
             */
            bringToFront(windowEl) {
                windowEl.style.zIndex = String(++this.zIndexCounter);
            }
            
            /**
             * Bring window to front on click
             * @returns {void}
             */
            bringToFrontOnClick() {
                const windows = document.querySelectorAll('.window');
                
                windows.forEach(windowEl => {
                    windowEl.addEventListener('mousedown', () => {
                        if (windowEl instanceof HTMLElement) {
                            this.bringToFront(windowEl);
                        }
                    });
                });
            }
            
            /**
             * Attach close button listeners
             * @returns {void}
             */
            attachCloseListeners() {
                const closeButtons = document.querySelectorAll('[data-action="close"]');
                
                closeButtons.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const windowEl = btn.closest('.window');
                        if (windowEl instanceof HTMLElement) {
                            this.closeWindow(windowEl);
                        }
                    });
                });
            }
            
            /**
             * Close a window with animation
             * @param {HTMLElement} windowEl
             * @returns {void}
             */
            closeWindow(windowEl) {
                windowEl.classList.remove('visible');
            }
            
            /**
             * Open a window by ID
             * @param {string} windowId
             * @returns {void}
             */
            openWindow(windowId) {
                const windowEl = document.getElementById(windowId);
                if (windowEl instanceof HTMLElement) {
                    windowEl.classList.add('visible');
                    this.bringToFront(windowEl);
                }
            }
        }
        
        /**
         * Desktop Icon Manager - Handles icon selection and double-click
         */
        class IconManager {
            constructor(windowManager) {
                /** @type {WindowManager} */
                this.windowManager = windowManager;
                /** @type {HTMLElement | null} */
                this.selectedIcon = null;
                
                this.init();
            }
            
            /**
             * Initialize icon manager
             * @returns {void}
             */
            init() {
                this.attachIconListeners();
            }
            
            /**
             * Attach icon listeners
             * @returns {void}
             */
            attachIconListeners() {
                const icons = document.querySelectorAll('.desktop-icon');
                
                icons.forEach(icon => {
                    icon.addEventListener('click', (e) => {
                        this.selectIcon(e.currentTarget);
                    });
                    
                    icon.addEventListener('dblclick', (e) => {
                        this.openIcon(e.currentTarget);
                    });
                });
                
                // Deselect on desktop click
                document.addEventListener('click', (e) => {
                    if (e.target instanceof HTMLElement && 
                        !e.target.closest('.desktop-icon') && 
                        !e.target.closest('.window')) {
                        this.deselectAll();
                    }
                });
            }
            
            /**
             * Select an icon
             * @param {EventTarget | null} iconEl
             * @returns {void}
             */
            selectIcon(iconEl) {
                if (!(iconEl instanceof HTMLElement)) return;
                
                this.deselectAll();
                iconEl.classList.add('selected');
                this.selectedIcon = iconEl;
            }
            
            /**
             * Deselect all icons
             * @returns {void}
             */
            deselectAll() {
                const icons = document.querySelectorAll('.desktop-icon');
                icons.forEach(icon => icon.classList.remove('selected'));
                this.selectedIcon = null;
            }
            
            /**
             * Open an icon (double-click)
             * @param {EventTarget | null} iconEl
             * @returns {void}
             */
            openIcon(iconEl) {
                if (!(iconEl instanceof HTMLElement)) return;
                
                const iconId = iconEl.id;
                const windowId = iconId.replace('icon-', 'window-');
                this.windowManager.openWindow(windowId);
            }
        }
        
        /**
         * Menu Manager - Handles menu interactions
         */
        class MenuManager {
            constructor(windowManager) {
                /** @type {WindowManager} */
                this.windowManager = windowManager;
                /** @type {HTMLElement | null} */
                this.activeMenu = null;
                
                this.init();
            }
            
            /**
             * Initialize menu manager
             * @returns {void}
             */
            init() {
                this.attachMenuListeners();
                this.attachDropdownListeners();
            }
            
            /**
             * Attach menu listeners
             * @returns {void}
             */
            attachMenuListeners() {
                const menuFile = document.getElementById('menu-file');
                
                if (menuFile) {
                    menuFile.addEventListener('click', (e) => {
                        e.stopPropagation();
                        this.toggleMenu('dropdown-file');
                    });
                }
                
                // Close menu on outside click
                document.addEventListener('click', () => {
                    this.closeAllMenus();
                });
            }
            
            /**
             * Toggle menu visibility
             * @param {string} menuId
             * @returns {void}
             */
            toggleMenu(menuId) {
                const menu = document.getElementById(menuId);
                if (!(menu instanceof HTMLElement)) return;
                
                const isActive = menu.classList.contains('active');
                this.closeAllMenus();
                
                if (!isActive) {
                    menu.classList.add('active');
                    this.activeMenu = menu;
                }
            }
            
            /**
             * Close all menus
             * @returns {void}
             */
            closeAllMenus() {
                const menus = document.querySelectorAll('.dropdown-menu');
                menus.forEach(menu => menu.classList.remove('active'));
                this.activeMenu = null;
            }
            
            /**
             * Attach dropdown listeners
             * @returns {void}
             */
            attachDropdownListeners() {
                const dropdownItems = document.querySelectorAll('.dropdown-item');
                
                dropdownItems.forEach(item => {
                    item.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const target = e.currentTarget;
                        if (target instanceof HTMLElement) {
                            const action = target.dataset.action;
                            this.handleDropdownAction(action || '');
                        }
                        this.closeAllMenus();
                    });
                });
            }
            
            /**
             * Handle dropdown action
             * @param {string} action
             * @returns {void}
             */
            handleDropdownAction(action) {
                switch(action) {
                    case 'open-about':
                        this.windowManager.openWindow('window-about');
                        break;
                    case 'open-project':
                        this.windowManager.openWindow('window-project');
                        break;
                    case 'open-system':
                        this.windowManager.openWindow('window-system');
                        break;
                }
            }
        }
        
        /**
         * Button Handler - Manages button interactions
         */
        class ButtonHandler {
            constructor() {
                this.init();
            }
            
            /**
             * Initialize button handlers
             * @returns {void}
             */
            init() {
                const viewProjectBtn = document.getElementById('view-project');
                const learnMoreBtn = document.getElementById('learn-more');
                
                if (viewProjectBtn) {
                    viewProjectBtn.addEventListener('click', () => {
                        this.handleViewProject();
                    });
                }
                
                if (learnMoreBtn) {
                    learnMoreBtn.addEventListener('click', () => {
                        this.handleLearnMore();
                    });
                }
            }
            
            /**
             * Handle view project button
             * @returns {void}
             */
            handleViewProject() {
                this.showAlert('Project Link', 'The Overgrown project link coming soon!');
            }
            
            /**
             * Handle learn more button
             * @returns {void}
             */
            handleLearnMore() {
                this.showAlert('Info', 'More information about The Overgrown coming soon!');
            }
            
            /**
             * Show Mac System 7 style alert
             * @param {string} title
             * @param {string} message
             * @returns {void}
             */
            showAlert(title, message) {
                const alertDiv = document.createElement('div');
                alertDiv.className = 'window visible';
                alertDiv.style.cssText = 'left: 50%; top: 50%; transform: translate(-50%, -50%); z-index: 10000; max-width: 400px;';
                
                alertDiv.innerHTML = `
                    <div class="title-bar">
                        <div class="title-bar-text">${title}</div>
                    </div>
                    <div class="window-content">
                        <p>${message}</p>
                        <button class="mac-button" onclick="this.closest('.window').remove()">OK</button>
                    </div>
                `;
                
                document.body.appendChild(alertDiv);
            }
        }
        
        /**
         * Application initialization
         * @returns {void}
         */
        function initApp() {
            try {
                const windowManager = new WindowManager();
                new IconManager(windowManager);
                new MenuManager(windowManager);
                new ButtonHandler();
                
                console.log('%cüíæ PB System 7.0 Loaded', 'font-family: Monaco; font-size: 12px;');
            } catch (error) {
                console.error('Failed to initialize app:', error);
            }
        }
        
        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initApp);
        } else {
            initApp();
        }
    </script>
</body>
</html>
